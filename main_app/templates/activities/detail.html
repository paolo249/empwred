{% extends 'base.html' %}
{% block content %}

<h1>{{ activity.title }}</h1>

<a href="{% url 'activity_update' activity.id %}">Edit</a>
<a href="{% url 'activity_delete' activity.id %}">Delete</a>

<div class="col s6">
    <h3>Category tags</h3>
      {% for c in activity.categories.all %}
        <div class="card">
          <div class="card-content">
            <span class="card-title">
              {{ c.title }}
            </span>
          </div>
        </div>
      {% endfor %}
      <h3>Logs</h3>

        <form action="{% url 'log_create' activity.id %}" method="POST">
          {% csrf_token %}
          {{ log_form.as_table }}
          <input type="submit" class="btn" value="Add time">
        </form>

      {% for log in activity.log_set.all %}
        <div class="card">
          <div class="card-panel">
            {{ log.duration_in_minutes }} minutes on {{ log.date_completed }}
            <a href="{% url 'log_delete' activity.id log.id %}">Delete</a>
          </div>
        </div>
      {% endfor %}

</div>


<script>

  const dateEl = document.getElementById('id_date_completed');
  M.Datepicker.init(dateEl, {
    format: 'yyyy-mm-dd',
    defaultDate: new Date(),
    setDefaultDate: true,
    autoClose: true
  });

</script>

{% endblock %}